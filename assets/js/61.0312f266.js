(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{414:function(t,a,n){"use strict";n.r(a);var s=n(42),e=Object(s.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h3",{attrs:{id:"dom事件传播机制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dom事件传播机制"}},[t._v("#")]),t._v(" DOM事件传播机制")]),t._v(" "),n("blockquote",[n("p",[t._v("在学习传播机制前，我们需要先了解事件流模型")])]),t._v(" "),n("h3",{attrs:{id:"事件流"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#事件流"}},[t._v("#")]),t._v(" 事件流")]),t._v(" "),n("p",[t._v("事件流描述的是从页面中接收事件的顺序")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("目前主要有三种模型\n1. 事件冒泡：事件开始时由最具体的元素接收，然后逐级向上传播到较为不具体的元素\n2. 事件捕获：不太具体的节点更早接收事件，而最具体的元素最后接收事件，和事件冒泡相反\n3. DOM事件流：DOM2级事件规定事件流包括三个阶段，事件捕获阶段，处于目标阶段，事件冒泡阶段，首先发生的是事件捕获，为截取事件提供机会，然后是实际目标接收事件，最后是冒泡阶段\n")])])]),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token doctype"}},[t._v("<!DOCTYPE html >")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("http-equiv")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Content-type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text/html; charset=utf-8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Test Page"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        Click Here\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("当点击div区域时，事件传播顺序：")]),t._v(" "),n("h3",{attrs:{id:"_1-事件冒泡模型："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-事件冒泡模型："}},[t._v("#")]),t._v(" 1. 事件冒泡模型：")]),t._v(" "),n("blockquote",[n("p",[t._v("传播顺序：div --\x3e body --\x3e html --\x3e Document")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/16155751-6d3d076ffd7d51cd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),t._v(" "),n("p",[t._v("也就是说，click事件首先在"),n("code",[t._v("<button>")]),t._v("元素上发生，然后逐级向上传播。这就是事件冒泡。")]),t._v(" "),n("h3",{attrs:{id:"_2-事件捕获模型："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-事件捕获模型："}},[t._v("#")]),t._v(" 2. 事件捕获模型：")]),t._v(" "),n("blockquote",[n("p",[t._v("传播顺序：Document --\x3e html --\x3e body --\x3e div")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/16155751-2c78c41a0e7422e1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),t._v(" "),n("h3",{attrs:{id:"_3-dom事件流"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-dom事件流"}},[t._v("#")]),t._v(" 3.DOM事件流")]),t._v(" "),n("blockquote",[n("p",[t._v("传播顺序：Document --\x3e html --\x3e body --\x3e div --\x3e body --\x3e html --\x3e Document")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/16155751-8dc1d8ac118dc108.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),t._v(" "),n("h3",{attrs:{id:"事件处理程序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#事件处理程序"}},[t._v("#")]),t._v(" 事件处理程序")]),t._v(" "),n("h4",{attrs:{id:"html内联方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#html内联方式"}},[t._v("#")]),t._v(" HTML内联方式")]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("button"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Click Here"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onclick")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("alert('Clicked!');"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),n("blockquote",[n("p",[t._v("缺点\n1 存在加载顺序问题，如果事件处理程序在html代码之后加载，用户可能在事件处理程序还未加载完成时就点击按钮之类的触发事件，存在时间差问题\n2 书写html代码和JavaScript代码紧密耦合，维护不方便")])]),t._v(" "),n("h5",{attrs:{id:"javascript指定事件处理程序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#javascript指定事件处理程序"}},[t._v("#")]),t._v(" JavaScript指定事件处理程序")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('<input id="btnClick" type="button" value="Click Here" />\n<script type="text/javascript">\n    var btnClick = document.getElementById(\'btnClick\');\n    btnClick.onclick = function showMessage() {\n        conole.log(\'hello\');\n    };\n    btnClick.onclick = function showMessage() {\n        console.log(\'hi\');\n    };\n<\/script>\n')])])]),n("p",[n("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/16155751-2b527ee3df0646d5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),t._v(" "),n("blockquote",[n("p",[t._v("优点：删除事件处理程序，只需把元素的onclick属性赋为null即可\n缺点：会产生覆盖，某些场景下无法满足需求")])]),t._v(" "),n("h4",{attrs:{id:"dom2事件处理程序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dom2事件处理程序"}},[t._v("#")]),t._v(" DOM2事件处理程序")]),t._v(" "),n("p",[t._v("DOM2级事件定义了两个方法用于处理指定和删除事件处理程序的操作：\n"),n("code",[t._v("addEventListener、removeEventListener")]),t._v("\n所有的DOM节点都包含这两个方法，并且它们都接受三个参数：")]),t._v(" "),n("ul",[n("li",[t._v("事件类型")]),t._v(" "),n("li",[t._v("事件处理方法")]),t._v(" "),n("li",[t._v("布尔参数，如果是true表示在捕获阶段调用事件处理程序，如果是false，则是在事件冒泡阶段处理")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <title>JS Bin</title>\n</head>\n<body>\n  <style>\n    .container,\n    .box,\n    .target{\n      border: 1px solid;\n      padding: 10px;\n    }  \n  </style>\n  <button id=\"btn\">click</button>\n  \n  <div class=\"container\">\n    container\n    <div class=\"box\">\n      box\n      <div class=\"target\">target</div>\n    </div>\n  </div>  \n  <script>\n    var container = document.querySelector('.container')\n    var box = document.querySelector('.box')\n    var target = document.querySelector('.target')\n    container.addEventListener('click', function(){\n      console.log('contianer click.. in 捕获阶段')\n    }, true)\n    box.addEventListener('click', function(){\n      console.log('box click.. in 捕获阶段')\n    }, true)\n    target.addEventListener('click', function(){\n      console.log('target click.. in 捕获阶段')\n    }, true)\n    container.addEventListener('click', function(){\n      console.log('contianer click.. in 冒泡阶段')\n    }, false)\n    box.addEventListener('click', function(){\n      console.log('box click.. in 冒泡阶段')\n    }, false)\n    target.addEventListener('click', function(){\n      console.log('target click.. in 冒泡阶段')\n    }, false)  \n  <\/script> \n</body>\n</html>\n")])])]),n("p",[n("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/16155751-7ac5d89e3032be32.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),t._v(" "),n("h4",{attrs:{id:"阻止事件传播"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#阻止事件传播"}},[t._v("#")]),t._v(" 阻止事件传播")]),t._v(" "),n("blockquote",[n("p",[t._v("preventDefault():取消事件默认行为\nstopPropagation():取消事件进一步捕获或冒泡\ntarget:事件的目标元素")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <title>JS Bin</title>\n</head>\n<body>\n  <a href=\"http://jirengu.com\">饥人谷</a>\n  <script>\n    var linka = document.querySelector('a');\n    linka.addEventListener('click',function(){\n       console.log(this.href);\n       event.preventDefault();\n    });\n//   document.querySelector('a').onclick= function(e){\n//     e.preventDefault()\n//     console.log(this.href)\n//     if(/jirengu.com/.test(this.href)){\n//       location.href = this.href\n//     }\n//   }\n  <\/script>  \n</body>\n</html>\n")])])]),n("p",[n("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/16155751-5267ca02c4bf4f5e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"阻止前"}})]),t._v(" "),n("p",[n("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/16155751-f3d347c8edc29521.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"阻止后"}})])])}),[],!1,null,null,null);a.default=e.exports}}]);