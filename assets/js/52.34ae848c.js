(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{403:function(t,e,n){"use strict";n.r(e);var r=n(42),a=Object(r.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h3",{attrs:{id:"è·¨åŸŸ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è·¨åŸŸ"}},[t._v("#")]),t._v(" è·¨åŸŸ")]),t._v(" "),n("h3",{attrs:{id:"åŒæºç­–ç•¥ï¼š"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åŒæºç­–ç•¥ï¼š"}},[t._v("#")]),t._v(" åŒæºç­–ç•¥ï¼š")]),t._v(" "),n("blockquote",[n("p",[t._v("æµè§ˆå™¨å‡ºäºå®‰å…¨æ–¹é¢çš„è€ƒè™‘ï¼Œåªå…è®¸ä¸æœ¬åŸŸä¸‹çš„æ¥å£äº¤äº’ã€‚ä¸åŒæºçš„å®¢æˆ·ç«¯è„šæœ¬åœ¨æ²¡æœ‰æ˜ç¡®æˆæƒçš„æƒ…å†µä¸‹ï¼Œä¸èƒ½è¯»å†™å¯¹æ–¹çš„èµ„æºã€‚")])]),t._v(" "),n("h4",{attrs:{id:"æœ¬åŸŸï¼š"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æœ¬åŸŸï¼š"}},[t._v("#")]),t._v(" æœ¬åŸŸï¼š")]),t._v(" "),n("ul",[n("li",[t._v("åŒåè®®ï¼šå¦‚éƒ½æ˜¯httpæˆ–è€…https")]),t._v(" "),n("li",[t._v("åŒåŸŸåï¼šå¦‚éƒ½æ˜¯"),n("a",{attrs:{href:"http://jirengu.com/a",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://jirengu.com/a"),n("OutboundLink")],1),t._v("Â å’Œ"),n("a",{attrs:{href:"http://jirengu.com/b",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://jirengu.com/b"),n("OutboundLink")],1)]),t._v(" "),n("li",[t._v("åŒç«¯å£ï¼šå¦‚éƒ½æ˜¯80ç«¯å£")])]),t._v(" "),n("p",[t._v("ä¸‹è¡¨ç»™å‡ºäº†ç›¸å¯¹http://store.company.com/dir/page.htmlåŒæºæ£€æµ‹çš„ç¤ºä¾‹:")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("URL")]),t._v(" "),n("th",[t._v("ç»“æœ")]),t._v(" "),n("th",[t._v("åŸå› ")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("http://store.company.com/dir2/other.html")]),t._v(" "),n("td",[t._v("æˆåŠŸ")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("http://store.company.com/dir/inner/another.html")]),t._v(" "),n("td",[t._v("æˆåŠŸ")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("https://store.company.com/secure.html")]),t._v(" "),n("td",[t._v("å¤±è´¥")]),t._v(" "),n("td",[t._v("ä¸åŒåè®® ( httpså’Œhttp )")])]),t._v(" "),n("tr",[n("td",[t._v("http://store.company.com:81/dir/etc.html")]),t._v(" "),n("td",[t._v("å¤±è´¥")]),t._v(" "),n("td",[t._v("ä¸åŒç«¯å£ ( 81å’Œ80)")])]),t._v(" "),n("tr",[n("td",[t._v("http://news.company.com/dir/other.html")]),t._v(" "),n("td",[t._v("å¤±è´¥")]),t._v(" "),n("td",[t._v("ä¸åŒåŸŸå ( newså’Œstore )")])])])]),t._v(" "),n("h2",{attrs:{id:"è·¨åŸŸçš„ä¸¤ç§æ–¹æ³•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è·¨åŸŸçš„ä¸¤ç§æ–¹æ³•"}},[t._v("#")]),t._v(" è·¨åŸŸçš„ä¸¤ç§æ–¹æ³•")]),t._v(" "),n("h3",{attrs:{id:"jsonp"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jsonp"}},[t._v("#")]),t._v(" JSONP")]),t._v(" "),n("blockquote",[n("p",[t._v("JSONPæ˜¯é€šè¿‡ script æ ‡ç­¾åŠ è½½æ•°æ®çš„æ–¹å¼å»è·å–æ•°æ®å½“åš JS ä»£ç æ¥æ‰§è¡Œ æå‰åœ¨é¡µé¢ä¸Šå£°æ˜ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°åé€šè¿‡æ¥å£ä¼ å‚çš„æ–¹å¼ä¼ ç»™åå°ï¼Œåå°è§£æåˆ°å‡½æ•°åååœ¨åŸå§‹æ•°æ®ä¸Šã€ŒåŒ…è£¹ã€è¿™ä¸ªå‡½æ•°åï¼Œå‘é€ç»™å‰ç«¯ã€‚æ¢å¥è¯è¯´ï¼ŒJSONP éœ€è¦å¯¹åº”æ¥å£çš„åç«¯çš„é…åˆæ‰èƒ½å®ç°ã€‚")])]),t._v(" "),n("p",[t._v("æ¯”å¦‚ï¼Œæœ‰ä¸ªhtmlé¡µé¢ï¼Œå®ƒé‡Œé¢çš„ä»£ç éœ€è¦è·å–ä¸€ä¸ªä¸åŒåŸŸä¸Šçš„jsonæ•°æ®ï¼Œå‡è®¾è¿™ä¸ªjsonæ•°æ®åœ°å€æ˜¯"),n("a",{attrs:{href:"http://127.0.0.1:8080/getNews",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://127.0.0.1:8080/getNews"),n("OutboundLink")],1),t._v("ï¼Œé‚£ä¹ˆhtmlä¸­çš„ä»£ç å°±å¯ä»¥è¿™æ ·ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("<script>\n\n  $('.show').addEventListener('click', function(){\n    var script = document.createElement('script');\n    // ä¼ å‚å¹¶æŒ‡å®šå›è°ƒæ‰§è¡Œå‡½æ•°ä¸ºappendHtml\n    script.src = 'http://127.0.0.1:8080/getNews?callback=appendHtml';\n    document.head.appendChild(script);\n    document.head.removeChild(script);\n  })\n  // å›è°ƒæ‰§è¡Œå‡½æ•°\n  function appendHtml(news){\n    var html = '';\n    for( var i=0; i<news.length; i++){\n      html += '<li>' + news[i] + '</li>';\n    }\n    console.log(html);\n    $('.news').innerHTML = html;\n  }\n\n  function $(id){\n    return document.querySelector(id);\n  }\n<\/script>\n")])])]),n("p",[t._v("è·å–æ•°æ®çš„åœ°å€åé¢è¿˜æœ‰ä¸€ä¸ªcallbackå‚æ•°ï¼ŒæŒ‰æƒ¯ä¾‹æ˜¯ç”¨è¿™ä¸ªå‚æ•°åï¼Œä½†æ˜¯ç”¨å…¶ä»–çš„ä¹Ÿä¸€æ ·ã€‚\n"),n("code",[t._v("script.src = 'http://127.0.0.1:8080/getNews?callback=appendHtml'")]),t._v("\nå› ä¸ºæ˜¯å½“åšä¸€ä¸ªjsæ–‡ä»¶æ¥å¼•å…¥çš„ï¼Œæ‰€ä»¥"),n("a",{attrs:{href:"http://127.0.0.1:8080/getNews",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://127.0.0.1:8080/getNews"),n("OutboundLink")],1),t._v("è¿”å›çš„å¿…é¡»æ˜¯ä¸€ä¸ªèƒ½æ‰§è¡Œçš„jsæ–‡ä»¶(ä¸€å®šè¦å’Œåç«¯çº¦å®šå¥½å“¦):")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("//æœåŠ¡å™¨ç«¯ä»£ç \nvar http = require('http')\nvar fs = require('fs')\nvar path = require('path')\nvar url = require('url')\n\nhttp.createServer(function(req, res){\n  var pathObj = url.parse(req.url, true)\n\n  switch (pathObj.pathname) {\n    case '/getNews':\n      var news = [\n        \"ğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜Š\",\n        \"Hi~ o(*ï¿£â–½ï¿£*)ãƒ–\",\n        \"ğŸ˜ğŸ˜ğŸ˜ğŸ˜\"\n        ]\n      res.setHeader('Content-Type','text/json; charset=utf-8')\n      //è¦è¿”å›çš„æ•°æ®\n      if(pathObj.query.callback){\n        res.end(pathObj.query.callback + '(' + JSON.stringify(news) + ')')\n      }else{\n        res.end(JSON.stringify(news))\n      }\n\n      break;\n\n    default:\n      fs.readFile(path.join(__dirname, pathObj.pathname), function(e, data){\n        if(e){\n          res.writeHead(404, 'not found')\n          res.end('<h1>404 Not Found</h1>')\n        }else{\n          res.end(data)\n        }\n      }) \n  }\n}).listen(8080)\n")])])]),n("p",[t._v("æœåŠ¡å™¨ç«¯è¿”å›")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('appendHtml(["ğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜Š","Hi~ o(*ï¿£â–½ï¿£*)ãƒ–","ğŸ˜ğŸ˜ğŸ˜ğŸ˜"])\n')])])]),n("p",[n("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/16155751-413dedc4cb1a33b5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),t._v(" "),n("blockquote",[n("p",[t._v("JSONPä¼˜ç‚¹ï¼š")])]),t._v(" "),n("ul",[n("li",[t._v("å®ƒä¸åƒXMLHttpRequestå¯¹è±¡å®ç°çš„Ajaxè¯·æ±‚é‚£æ ·å—åˆ°åŒæºç­–ç•¥çš„é™åˆ¶")]),t._v(" "),n("li",[t._v("å®ƒçš„å…¼å®¹æ€§æ›´å¥½ï¼Œåœ¨è€ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸­å¯ä»¥è¿è¡Œï¼Œä¸éœ€è¦XMLHttpRequestæˆ–ActiveXçš„æ”¯æŒ")]),t._v(" "),n("li",[t._v("å®ƒåœ¨è¯·æ±‚å®Œæ¯•åå¯ä»¥é€šè¿‡è°ƒç”¨callbackçš„æ–¹å¼å›ä¼ ç»“æœï¼Œæ–¹ä¾¿è°ƒç”¨ã€‚")])]),t._v(" "),n("blockquote",[n("p",[t._v("JSONPç¼ºç‚¹ï¼š")])]),t._v(" "),n("ul",[n("li",[t._v("å®ƒåªæ”¯æŒGETè¯·æ±‚è€Œä¸æ”¯æŒPOSTç­‰å…¶å®ƒç±»å‹çš„HTTPè¯·æ±‚ï¼Œä¸èƒ½æäº¤å¤§é‡æ•°æ®")]),t._v(" "),n("li",[t._v("å®ƒåªæ”¯æŒè·¨åŸŸHTTPè¯·æ±‚è¿™ç§æƒ…å†µï¼Œä¸èƒ½è§£å†³ä¸åŒåŸŸçš„ä¸¤ä¸ªé¡µé¢ä¹‹é—´å¦‚ä½•è¿›è¡ŒJavaScriptè°ƒç”¨çš„é—®é¢˜")])]),t._v(" "),n("h3",{attrs:{id:"cors"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cors"}},[t._v("#")]),t._v(" CORS")]),t._v(" "),n("blockquote",[n("p",[t._v("CORS å…¨ç§°æ˜¯è·¨åŸŸèµ„æºå…±äº«ï¼ˆCross-Origin Resource Sharingï¼‰ï¼Œæ˜¯ä¸€ç§ ajax è·¨åŸŸè¯·æ±‚èµ„æºçš„æ–¹å¼ï¼Œæ”¯æŒç°ä»£æµè§ˆå™¨ï¼ŒIEæ”¯æŒ10ä»¥ä¸Šã€‚ å®ç°æ–¹å¼å¾ˆç®€å•ï¼Œå½“ä½ ä½¿ç”¨ XMLHttpRequest å‘é€è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨å‘ç°è¯¥è¯·æ±‚ä¸ç¬¦åˆåŒæºç­–ç•¥ï¼Œä¼šç»™è¯¥è¯·æ±‚åŠ ä¸€ä¸ªè¯·æ±‚å¤´ï¼šOriginï¼Œåå°è¿›è¡Œä¸€ç³»åˆ—å¤„ç†ï¼Œå¦‚æœç¡®å®šæ¥å—è¯·æ±‚åˆ™åœ¨è¿”å›ç»“æœä¸­åŠ å…¥ä¸€ä¸ªå“åº”å¤´ï¼šAccess-Control-Allow-Origin; æµè§ˆå™¨åˆ¤æ–­è¯¥ç›¸åº”å¤´ä¸­æ˜¯å¦åŒ…å« Origin çš„å€¼ï¼Œå¦‚æœæœ‰åˆ™æµè§ˆå™¨ä¼šå¤„ç†å“åº”ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‹¿åˆ°å“åº”æ•°æ®ï¼Œå¦‚æœä¸åŒ…å«æµè§ˆå™¨ç›´æ¥é©³å›ï¼Œè¿™æ—¶æˆ‘ä»¬æ— æ³•æ‹¿åˆ°å“åº”æ•°æ®ã€‚æ‰€ä»¥ CORS çš„è¡¨è±¡æ˜¯è®©ä½ è§‰å¾—å®ƒä¸åŒæºçš„ ajax è¯·æ±‚æ²¡å•¥åŒºåˆ«ï¼Œä»£ç å®Œå…¨ä¸€æ ·ã€‚")])]),t._v(" "),n("p",[t._v("ä»£ç ç›¸å¯¹è·¯å¾„æ¢æˆäº†å…¶ä»–åŸŸçš„ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯ä½ è¦è·¨åŸŸè®¿é—®çš„æ¥å£åœ°å€ã€‚")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("<script>\n  function $(selector){\n    return document.querySelector(selector)\n  }\n  $('.show').addEventListener('click', function(){\n    var xhr = new XMLHttpRequest()\n    xhr.open('GET', 'http://127.0.0.1:8080/getNews', true)\n    xhr.send()\n    xhr.onload = function(){\n      appendHtml(JSON.parse(xhr.responseText))\n    }\n  })\n<\/script>\n")])])]),n("p",[t._v("æœåŠ¡å™¨ç«¯å¯¹äºCORSçš„æ”¯æŒï¼Œä¸»è¦å°±æ˜¯é€šè¿‡è®¾ç½®Access-Control-Allow-Originæ¥è¿›è¡Œçš„ã€‚å¦‚æœæµè§ˆå™¨æ£€æµ‹åˆ°ç›¸åº”çš„è®¾ç½®ï¼Œå°±å¯ä»¥å…è®¸Ajaxè¿›è¡Œè·¨åŸŸçš„è®¿é—®ã€‚"),n("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/04/cors.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("è·¨åŸŸèµ„æºå…±äº« CORS è¯¦è§£"),n("OutboundLink")],1)]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("æœåŠ¡å™¨ç«¯ä»£ç \nvar http = require('http')\nvar fs = require('fs')\nvar path = require('path')\nvar url = require('url')\n\nhttp.createServer(function(req, res){\n  var pathObj = url.parse(req.url, true)\n\n  switch (pathObj.pathname) {\n    case '/getNews':\n    var news = [\n      \"ğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜Š\",\n      \"Hi~ o(*ï¿£â–½ï¿£*)ãƒ–\",\n      \"ğŸ˜ğŸ˜ğŸ˜ğŸ˜\"\n      ]\n      // è·¨åŸŸåå°è®¾ç½®\n      res.setHeader('Access-Control-Allow-Origin','http://localhost:8080') // å…è®¸è®¿é—®çš„åŸŸï¼ˆåè®®+åŸŸå+ç«¯å£ï¼‰\n      //res.setHeader('Access-Control-Allow-Origin','*')// å…¨éƒ¨å…è®¸\n      res.end(JSON.stringify(news))\n      break;\n    default:\n      fs.readFile(path.join(__dirname, pathObj.pathname), function(e, data){\n        if(e){\n          res.writeHead(404, 'not found')\n          res.end('<h1>404 Not Found</h1>')\n        }else{\n          res.end(data)\n        }\n      }) \n  }\n}).listen(8080)\n")])])]),n("p",[n("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/16155751-2b919503b5b1cbb7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"fail"}})]),t._v(" "),n("p",[n("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/16155751-8f943addecbd007f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"fail"}})]),t._v(" "),n("p",[n("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/16155751-ae1350962e79307a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"success"}})]),t._v(" "),n("blockquote",[n("p",[t._v("å› ä¸ºfanison.com:8080æœªåœ¨å…è®¸è®¿é—®çš„åŸŸå†…ï¼ˆ"),n("code",[t._v("res.setHeader('Access-Control-Allow-Origin','http://localhost:8080')")]),t._v("ï¼‰ï¼Œè·¨åŸŸå¤±è´¥\nè®¾ç½®ä¸º"),n("code",[t._v("res.setHeader('Access-Control-Allow-Origin','*')")]),t._v("å¯ä»¥å®ç°è·¨åŸŸ")])])])}),[],!1,null,null,null);e.default=a.exports}}]);